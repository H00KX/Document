# 缓存管理器

缓存管理器是一组内核模式的函数和系统线程，它们与内存管理器协同工作，为所有的**Windows文件系统驱动程序**提供了数据缓存的能力。

## 缓存管理器的特性：
- 支持所有的文件系统类型
- 使用内存管理器来控制哪些文件的哪些部分位于物理内存中
- 以虚拟块（即在一个文件内部的偏移）为基础来缓存数据
- 允许应用程序在打开文件时传递“提示”
- 支持可恢复的文件系统

### 单个中心化的系统缓存
有些操作系统信赖于每一个单独的文件系统来缓存数据，而Windows提供了一个中心化的缓存设施，它可以缓存所有外部保存的数据。

> 缓存的用途是将频繁被访问的数据的一个子集高妙在物理内存中，作为提高I/O性能的一种方法。

### 内存管理器
缓存管理器的一个非同寻常的方面是，它从来不知道有多少被缓存的数据真的在物理内存中。
这是因为：**它访问的数据的做法是将文件的视图映射到系统虚拟地址空间中，它使用的标准的内存区对象。随着这些映射视图中的地址陆续被访问，内存管理器把那些不在物理内存中的数据块换到物理内存中。当内存需求吃紧时，内存管理器又把缓存中的数据换出去，如果它们被修改过的话，还把它们写回到那些文件中。**
